<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="LP">
  <title>LP</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Meta Pixel Code -->
  <script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '1800963877227558');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=1800963877227558&ev=PageView&noscript=1"
  /></noscript>
  <!-- End Meta Pixel Code -->
</head>
<body class="bg-white text-[#1a120b] font-['Space_Grotesk','Noto_Sans_JP',sans-serif]">
  <main class="min-h-0 sm:min-h-screen flex flex-col items-start sm:items-stretch gap-0 w-screen sm:w-full overflow-x-hidden px-0 lg:px-4 bg-white">
    <div class="relative w-full max-w-[1300px] mx-auto overflow-hidden">
      <img class="block w-full mx-auto" src="images/アセット 20 (1).png" alt="LP のメインビジュアル">
      <a class="absolute left-1/2 bottom-3 -translate-x-1/2 transform block w-full max-w-[1300px]" href="#contact-visual" aria-label="お問い合わせへ移動">
        <img class="block h-auto w-[95%] max-w-full translate-x-[2%] transition-transform duration-200 ease-out hover:-translate-y-0.5 hover:scale-[1.01]" src="images/アセット 34 (1).png" alt="お問い合わせへ進むアクセントバナー">
      </a>
    </div>
    <div class="w-[calc(100vw+32px)] max-w-none mx-[-16px] leading-none translate-x-[1px] sm:translate-x-[2px]">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49%] -translate-x-[48.5%]" src="images/アセット 18 (1) (1).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49%] -translate-x-[49%]" src="images/アセット 21 (1).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49%] -translate-x-[49%]" src="images/アセット 19 (1).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49.5%] -translate-x-[49.5%]" src="images/アセット 22 (1).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49.5%] -translate-x-[49.5%] z-20" src="images/アセット 23 (1) (1).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 -mt-1 block relative left-[49.5%] -translate-x-[49.5%] z-10" src="images/アセット 23 (3).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49.3%] -translate-x-[49.3%]" src="images/アセット 24 (1).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49.3%] -translate-x-[49.3%]" src="images/アセット 25.png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49.3%] -translate-x-[49.3%]" src="images/アセット 26 (1).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49.3%] -translate-x-[49.3%]" src="images/アセット 27 (1).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49.3%] -translate-x-[49.3%]" src="images/アセット 29 (1).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49.3%] -translate-x-[49.3%]" src="images/アセット 30 (1).png" alt="LP のメインビジュアル">
      <img class="w-[101vw] max-w-none m-0 block relative left-[49.3%] -translate-x-[49.3%]" src="images/アセット 31 (1).png" alt="LP のメインビジュアル">
      <img class="w-[95vw] max-w-none m-0 mt-4 block relative left-[49.5%] -translate-x-[49.3%]" src="images/アセット 32.png" alt="LP のメインビジュアル">
      <img class="w-[100vw] max-w-none mt-8 block relative left-[49.3%] -translate-x-[49.5%]" src="images/アセット 13.png" alt="LP のメインビジュアル">
      <img class="w-[100vw] max-w-none mt-8 block relative left-[49.5%] -translate-x-[49.5%]" src="images/アセット 14 (2) (1).png" alt="LP のメインビジュアル">
      <img class="w-[95vw] max-w-none mt-8 block relative left-[49.5%] -translate-x-[49.5%]" src="images/アセット 14 (3) (1) (1).png" alt="LP のメインビジュアル">
      <img class="w-[95vw] max-w-none mt-8 block relative left-[49.5%] -translate-x-[49.5%]" src="images/アセット 14 (4) (1) (1).png" alt="LP のメインビジュアル">
      <img class="w-[95vw] max-w-none mt-8 block relative left-[49.5%] -translate-x-[49.5%]" src="images/アセット 14 (5) (1).png" alt="LP のメインビジュアル">
      <img class="w-[95vw] max-w-none mt-8 block relative left-[49.5%] -translate-x-[49.5%]" src="images/アセット 14 (6) (1).png" alt="LP のメインビジュアル">
      <img class="w-[95vw] max-w-none mt-8 block relative left-[49.5%] -translate-x-[49.5%]" src="images/アセット 14 (7) (1).png" alt="LP のメインビジュアル">
      <img id="contact-visual" class="w-[85vw] max-w-none mt-8 block relative left-[49%] -translate-x-[49.5%] scroll-mt-10" src="images/アセット 15.png" alt="LP のメインビジュアル">
    </div>
    <section class="bg-white flex flex-col items-center px-2 sm:px-6 lg:px-10 py-8 mt-8 md:mt-12 w-full overflow-hidden">
      <form id="contact" action="https://formspree.io/f/xpwvnnpd" method="POST" class="w-full max-w-[1500px] min-w-[320px] shrink-0 text-[#1a120b] font-['Noto_Sans_JP','Space_Grotesk',sans-serif] space-y-4 px-6 sm:px-10 md:px-14 lg:px-16">
        <input type="hidden" name="_redirect" id="form-redirect" value="thanks.html">
        <p class="m-0 text-[16px] font-bold">[入力項目]</p>

        <div class="space-y-1.5">
          <div class="inline-flex items-center gap-1.5">
            <span class="text-[15px] font-bold">お名前</span>
            <span class="inline-block px-2 py-1 bg-[#d7625b] text-white rounded-full text-[12px] font-bold leading-none">必須</span>
          </div>
          <input type="text" name="name" aria-label="お名前" required class="w-full px-3 py-2 border-2 border-[#f1a532] rounded-lg bg-[#fffdf7] text-[14px] focus:outline-none focus:border-[#e58b20] focus:ring-2 focus:ring-[#e58b20]/30">
          <p id="error-name" class="m-0 text-sm text-red-600 hidden">※ 入力してください</p>
        </div>

        <div class="space-y-1.5">
          <div class="inline-flex items-center gap-1.5">
            <span class="text-[15px] font-bold">電話番号</span>
            <span class="inline-block px-2 py-1 bg-[#d7625b] text-white rounded-full text-[12px] font-bold leading-none">必須</span>
          </div>
          <input type="tel" name="phone" aria-label="電話番号" required class="w-full px-3 py-2 border-2 border-[#f1a532] rounded-lg bg-[#fffdf7] text-[14px] focus:outline-none focus:border-[#e58b20] focus:ring-2 focus:ring-[#e58b20]/30">
          <p id="error-phone" class="m-0 text-sm text-red-600 hidden">※ 入力してください</p>
        </div>

        <div class="space-y-1.5">
          <div class="inline-flex items-center gap-1.5">
            <span class="text-[15px] font-bold">メールアドレス</span>
            <span class="inline-block px-2 py-1 bg-[#d7625b] text-white rounded-full text-[12px] font-bold leading-none">必須</span>
          </div>
          <input type="email" name="email" aria-label="メールアドレス" required class="w-full px-3 py-2 border-2 border-[#f1a532] rounded-lg bg-[#fffdf7] text-[14px] focus:outline-none focus:border-[#e58b20] focus:ring-2 focus:ring-[#e58b20]/30">
          <p id="error-email" class="m-0 text-sm text-red-600 hidden">※ 入力してください</p>
        </div>

        <div class="space-y-1.5">
          <div class="inline-flex items-center gap-1.5">
            <span class="text-[15px] font-bold">お住まいの地域</span>
            <span class="inline-block px-2 py-1 bg-[#d7625b] text-white rounded-full text-[12px] font-bold leading-none">必須</span>
          </div>
          <div class="grid grid-cols-4 gap-x-3 gap-y-2 text-[14px] font-medium mt-1">
            <label class="flex items-center gap-2"><input type="radio" name="pref" value="札幌市" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 札幌市</label>
            <label class="flex items-center gap-2"><input type="radio" name="pref" value="旭川市" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 旭川市</label>
            <label class="flex items-center gap-2"><input type="radio" name="pref" value="函館市" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 函館市</label>
            <label class="flex items-center gap-2"><input type="radio" name="pref" value="帯広市" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 帯広市</label>
            <label class="flex items-center gap-2"><input type="radio" name="pref" value="釧路市" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 釧路市</label>
            <label class="flex items-center gap-3 whitespace-nowrap"><input type="radio" name="pref" value="その他北海道内" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> その他北海道内</label>
          </div>
          <p id="error-pref" class="m-0 text-sm text-red-600 hidden">※ 選択してください</p>
        </div>

        <div class="space-y-1.5">
          <div class="inline-flex items-center gap-1.5">
            <span class="text-[15px] font-bold">現在の月平均電気代</span>
            <span class="inline-block px-2 py-1 bg-[#d7625b] text-white rounded-full text-[12px] font-bold leading-none">必須</span>
          </div>
          <div class="grid grid-cols-3 gap-x-3 gap-y-2 text-[14px] font-medium mt-1">
            <label class="flex items-center gap-2"><input type="radio" name="rent" value="1万円未満" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 1万円未満</label>
            <label class="flex items-center gap-2"><input type="radio" name="rent" value="1〜2万円" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 1〜2万円</label>
            <label class="flex items-center gap-2"><input type="radio" name="rent" value="2〜3万円" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 2〜3万円</label>
            <label class="flex items-center gap-2"><input type="radio" name="rent" value="3〜5万円" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 3〜5万円</label>
            <label class="flex items-center gap-2"><input type="radio" name="rent" value="5万円以上" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 5万円以上</label>
          </div>
          <p id="error-rent" class="m-0 text-sm text-red-600 hidden">※ 選択してください</p>
        </div>

        <div class="space-y-1.5">
          <div class="inline-flex items-center gap-1.5">
            <span class="text-[15px] font-bold">冬季(12-2月)の最高電気代</span>
            <span class="inline-block px-2 py-1 bg-[#d7625b] text-white rounded-full text-[12px] font-bold leading-none">必須</span>
          </div>
          <div class="grid grid-cols-3 gap-x-3 gap-y-2 text-[14px] font-medium mt-1">
            <label class="flex items-center gap-2"><input type="radio" name="bill_winter" value="3万円未満" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 3万円未満</label>
            <label class="flex items-center gap-2"><input type="radio" name="bill_winter" value="3〜5万円" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 3〜5万円</label>
            <label class="flex items-center gap-2"><input type="radio" name="bill_winter" value="5〜8万円" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 5〜8万円</label>
            <label class="flex items-center gap-2"><input type="radio" name="bill_winter" value="8〜10万円" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 8〜10万円</label>
            <label class="flex items-center gap-2"><input type="radio" name="bill_winter" value="10万円以上" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 10万円以上</label>
          </div>
          <p id="error-bill-winter" class="m-0 text-sm text-red-600 hidden">※ 選択してください</p>
        </div>

        <div class="space-y-1.5">
          <div class="inline-flex items-center gap-1.5">
            <span class="text-[15px] font-bold">住居タイプ</span>
            <span class="inline-block px-2 py-1 bg-[#d7625b] text-white rounded-full text-[12px] font-bold leading-none">必須</span>
          </div>
          <div class="grid grid-cols-3 gap-x-3 gap-y-2 text-[14px] font-medium mt-1">
            <label class="flex items-center gap-2"><input type="radio" name="house_type" value="戸建て" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 戸建て</label>
            <label class="flex items-center gap-2"><input type="radio" name="house_type" value="マンション" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> マンション</label>
            <label class="flex items-center gap-2"><input type="radio" name="house_type" value="アパート" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> アパート</label>
            <label class="flex items-center gap-2"><input type="radio" name="house_type" value="その他" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> その他</label>
          </div>
          <p id="error-house-type" class="m-0 text-sm text-red-600 hidden">※ 選択してください</p>
        </div>

        <div class="space-y-1.5">
          <div class="inline-flex items-center gap-1.5">
            <span class="text-[15px] font-bold">北電の値上げについて</span>
            <span class="inline-block px-2 py-1 bg-[#d7625b] text-white rounded-full text-[12px] font-bold leading-none">必須</span>
          </div>
          <div class="grid grid-cols-3 gap-x-3 gap-y-2 text-[14px] font-medium mt-1">
            <label class="flex items-center gap-2"><input type="radio" name="price_inc" value="非常に負担" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 非常に負担</label>
            <label class="flex items-center gap-2"><input type="radio" name="price_inc" value="やや負担" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> やや負担</label>
            <label class="flex items-center gap-2"><input type="radio" name="price_inc" value="仕方ない" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 仕方ない</label>
            <label class="flex items-center gap-2 whitespace-nowrap"><input type="radio" name="price_inc" value="知らなかった" class="w-3.5 h-3.5 rounded-[4px] border border-[#f1a532]/80 bg-white accent-[#f1a532] focus:outline-none focus:ring-2 focus:ring-[#e58b20]/40 focus:ring-offset-1 shrink-0"> 知らなかった</label>
          </div>
          <p id="error-price-inc" class="m-0 text-sm text-red-600 hidden">※ 選択してください</p>
        </div>

        <div class="w-full max-w-[1500px] min-w-[320px] shrink-0 text-[#1a120b] font-['Noto_Sans_JP','Space_Grotesk',sans-serif] text-[12px] leading-[1.6] px-0 mt-6 space-y-3">
          <p class="m-0">※ 診断は完全無料です。</p>
          <p class="m-0">しつこい営業は一切いたしません。</p>
          <p class="m-0">※ 個人情報は厳重に管理し、診断以外の目的では使用しません。</p>
          <p class="m-0">※ 価格の詳細は、診断後の個別相談にてご案内いたします。</p>
        </div>

        <div class="pt-6 pb-4">
          <button id="submit-button" type="submit" class="block w-[260px] sm:w-[280px] mx-auto px-7 py-3.5 text-xl font-semibold bg-[#2a7fb8] text-white rounded-[18px] shadow-none transition-colors duration-200 hover:bg-[#2f8bc6] focus:outline-none focus:ring-2 focus:ring-[#2f8bc6]/40 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed">送信する</button>
        </div>
      </form>
      <div class="w-full max-w-[1500px] min-w-[320px] shrink-0 bg-[#fefcf3] px-0 mt-6 flex justify-start">
        <a class="inline-block w-full" href="#contact-visual" aria-label="お問い合わせへ移動">
          <img class="block h-auto w-full max-w-[1500px] pl-2 pr-[9px]" src="images/アセット 34 (1).png" alt="お問い合わせへ進むアクセントバナー">
        </a>
      </div>
    </section>
    <img src="images/アセット 19 (2) (1).png" alt="お問い合わせ案内のビジュアル" class="w-full max-w-[1500px] min-w-[320px] pb-1.5 mb-2 mx-auto block h-auto object-contain bg-white">
    <div class="w-full px-4 pb-10">
      <div class="max-w-[420px] mx-auto bg-white px-5 py-6 text-[#111827] font-['Noto_Sans_JP','Space_Grotesk',sans-serif]">
        <p class="m-0 text-[18px] font-bold">会社情報</p>
        <p class="m-0 text-[13px] font-semibold mt-4 leading-[1.6]">
          SoLaNi ENERGIE株式会社 × 株式会社ボルタ<br>
          〒530-0055 大阪府大阪市北区野崎町9-13<br>
          梅田扇町通ビル9F
        </p>
        <div class="mt-4 space-y-2 text-[13px] font-semibold leading-[1.6]">
          <p class="m-0">特許取得済み: 第7729575号</p>
          <p class="m-0">「スマート買取システム」蓄電容量11.77kWh</p>
          <p class="m-0">使用可能容量:10.294kWh</p>
          <p class="m-0">サイクル寿命:10,000回</p>
          <p class="m-0">保証期間:15年(有償20年延長可能)</p>
          <p class="m-0">停電時切替:0.01秒(業界最速)</p>
        </div>
        <p class="m-0 text-[11px] font-semibold mt-4">© 2024 SoLaNi ENERGIE Inc. &amp; VOLTA Inc. All Rights Reserved.</p>
      </div>
    </div>
  </main>
  <script>
    (() => {
      const redirectInput = document.getElementById("form-redirect");
      if (redirectInput && location.origin && location.origin !== "null" && !location.origin.startsWith("file:")) {
        const basePath = location.pathname.endsWith("/")
          ? location.pathname
          : location.pathname.replace(/[^/]*$/, "");
        redirectInput.value = `${location.origin}${basePath}thanks.html`;
      }

      const form = document.getElementById("contact");
      const button = document.getElementById("submit-button");
      if (!form || !button) return;

      const groups = [
        { name: "pref", errorId: "error-pref" },
        { name: "rent", errorId: "error-rent" },
        { name: "bill_winter", errorId: "error-bill-winter" },
        { name: "house_type", errorId: "error-house-type" },
        { name: "price_inc", errorId: "error-price-inc" },
      ];

      const requiredFields = [
        { selector: 'input[name="name"]', errorId: "error-name" },
        { selector: 'input[name="phone"]', errorId: "error-phone" },
        { selector: 'input[name="email"]', errorId: "error-email" },
      ];

      const showError = (id, show) => {
        const el = document.getElementById(id);
        if (!el) return;
        el.classList.toggle("hidden", !show);
      };

      let hasSubmitted = false;

      const updateState = () => {
        let allFilled = true;

        groups.forEach(({ name, errorId }) => {
          const selected = document.querySelector(`input[name="${name}"]:checked`);
          const missing = !selected;
          showError(errorId, hasSubmitted && missing);
          if (missing) allFilled = false;
        });

        requiredFields.forEach(({ selector, errorId }) => {
          const field = form.querySelector(selector);
          if (!field) return;
          const missing = !field.value.trim();
          showError(errorId, hasSubmitted && missing);
          if (missing) allFilled = false;
        });

        return allFilled;
      };

      document.addEventListener("change", (e) => {
        const target = e.target;
        if (target && target.name && (groups.some(g => g.name === target.name) || requiredFields.some(({ selector }) => target.matches(selector)))) {
          updateState();
        }
      });

      form.addEventListener("submit", (e) => {
        hasSubmitted = true;
        const ok = updateState();
        if (!ok || !form.checkValidity()) {
          e.preventDefault();
          form.reportValidity();
        }
      });

      // 初期状態を評価
      updateState();
    })();
  </script>
</body>
</html>
